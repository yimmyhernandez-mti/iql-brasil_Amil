import React, { useState } from 'react';
import { 
  User, 
  Building2, 
  MapPin, 
  Briefcase, 
  Clock, 
  CheckCircle2, 
  AlertTriangle, 
  MessageCircle, 
  BarChart3,
  ThumbsUp,
  XCircle,
  Send,
  Target,
  Copy,
  Globe,
  BookOpen
} from 'lucide-react';

// --- PALETA DE COLORES MTI ---
// Principal (Teal): text-teal-600, bg-teal-600
// Acento (Naranja): text-orange-500, bg-orange-500
// Fondo suave: bg-slate-50

const StatusBadge = ({ status }) => {
  const styles = {
    hot: "bg-green-100 text-green-700 border-green-200",
    warm: "bg-orange-50 text-orange-700 border-orange-200", 
    cold: "bg-slate-100 text-slate-600 border-slate-200",
    info: "bg-amber-100 text-amber-700 border-amber-200" // Amarillo para 'Informativo'
  };
  
  return (
    <span className={`px-3 py-1 rounded-full text-xs font-bold border ${styles[status] || styles.cold} flex items-center gap-1`}>
      {status === 'hot' && <ThumbsUp className="w-3 h-3" />}
      {status === 'info' && <BookOpen className="w-3 h-3" />}
      {status === 'warm' && <Clock className="w-3 h-3" />}
      {status === 'info' ? 'IQL INFORMATIVO / NURTURING' : status.toUpperCase()}
    </span>
  );
};

const ICPMatch = ({ label, score, max = 10, color = "bg-teal-600" }) => (
  <div className="mb-3">
    <div className="flex justify-between text-xs font-semibold uppercase text-slate-500 mb-1">
      <span>{label}</span>
      <span>{score}/{max}</span>
    </div>
    <div className="h-2 bg-slate-100 rounded-full overflow-hidden">
      <div style={{ width: `${(score/max)*100}%` }} className={`h-full ${color} rounded-full`}></div>
    </div>
  </div>
);

const TimelineItem = ({ date, title, desc, type }) => {
  const types = {
    success: "bg-teal-50 border-teal-200 text-teal-900", // Verde MTI
    neutral: "bg-slate-50 border-slate-200 text-slate-700",
    warning: "bg-orange-50 border-orange-200 text-orange-900", // Naranja MTI
    fail: "bg-red-50 border-red-200 text-red-900"
  };

  const icons = {
    success: <CheckCircle2 className="w-4 h-4 text-teal-600" />,
    neutral: <MessageCircle className="w-4 h-4 text-slate-400" />,
    warning: <AlertTriangle className="w-4 h-4 text-orange-500" />,
    fail: <XCircle className="w-4 h-4 text-red-600" />
  };

  return (
    <div className="relative pl-8 pb-6 border-l-2 border-slate-200 last:border-0 last:pb-0">
      <div className={`absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-slate-300`}></div>
      <div className={`text-xs text-slate-400 mb-1 font-mono`}>{date}</div>
      <div className={`p-3 rounded-lg border text-sm ${types[type]}`}>
        <div className="flex items-center gap-2 font-bold mb-1">
          {icons[type]}
          {title}
        </div>
        <div className="opacity-90">{desc}</div>
      </div>
    </div>
  );
};

const BilingualMessage = ({ title, ptText, esText, recommended }) => (
  <div className={`mb-6 border-2 rounded-xl overflow-hidden ${recommended ? 'border-teal-500' : 'border-slate-200'}`}>
    <div className={`px-4 py-2 border-b flex justify-between items-center ${recommended ? 'bg-teal-50' : 'bg-slate-50'}`}>
      <span className={`font-bold text-sm ${recommended ? 'text-teal-800' : 'text-slate-700'}`}>{title}</span>
      {recommended && <span className="bg-teal-600 text-white text-[10px] px-2 py-0.5 rounded uppercase font-bold tracking-wider">Recomendada</span>}
    </div>
    
    <div className="grid md:grid-cols-2 divide-y md:divide-y-0 md:divide-x border-slate-100">
      {/* Portugu√©s */}
      <div className="p-4 bg-white">
        <div className="flex justify-between items-center mb-2">
          <div className="flex items-center gap-1 text-xs font-bold text-teal-700 uppercase">
             <Globe className="w-3 h-3" /> Portugu√©s (Enviar)
          </div>
          <button 
             onClick={() => navigator.clipboard.writeText(ptText)}
             className="text-[10px] flex items-center gap-1 bg-slate-100 hover:bg-slate-200 text-slate-600 px-2 py-1 rounded transition-colors"
          >
            <Copy className="w-3 h-3" /> Copiar
          </button>
        </div>
        <div className="text-sm text-slate-700 whitespace-pre-line font-mono bg-slate-50 p-3 rounded border border-slate-100">
          {ptText}
        </div>
      </div>
      
      {/* Espa√±ol */}
      <div className="p-4 bg-slate-50/50">
        <div className="flex items-center gap-1 text-xs font-bold text-slate-400 uppercase mb-2">
           <MessageCircle className="w-3 h-3" /> Espa√±ol (Ref)
        </div>
        <div className="text-sm text-slate-500 italic whitespace-pre-line">
          {esText}
        </div>
      </div>
    </div>
  </div>
);

export default function App() {
  const [activeTab, setActiveTab] = useState('analysis');

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-12">
      
      {/* Header con colores MTI */}
      <header className="bg-gradient-to-r from-teal-900 via-teal-800 to-slate-900 text-white py-8 px-4 relative overflow-hidden shadow-md">
        <div className="max-w-6xl mx-auto relative z-10 flex flex-col md:flex-row justify-between items-center gap-4">
          <div>
            <div className="inline-flex items-center gap-2 bg-teal-700/50 px-3 py-1 rounded-full text-teal-100 text-xs font-bold uppercase tracking-widest mb-2 border border-teal-500/50">
              Salud / Healthcare
            </div>
            <h1 className="text-3xl md:text-4xl font-black tracking-tight">
              An√°lisis IQL: Grupo Amil
            </h1>
            <p className="text-teal-100 font-light mt-1">
              Caso: Ricardo Burgos | Timing y Priorizaci√≥n
            </p>
          </div>
          <div className="flex items-center gap-4">
            <div className="text-right hidden md:block">
              <div className="text-xs text-teal-300 font-bold uppercase">Estado Actual</div>
              <div className="text-sm font-semibold">Ult. Interacci√≥n: 18 Dic</div>
            </div>
            {/* Badge Status - Info/Amber para este caso */}
            <div className="bg-amber-100 text-amber-800 px-4 py-2 rounded-lg font-bold shadow-lg flex items-center gap-2 border border-amber-200">
              <BookOpen className="w-4 h-4" />
              IQL INFORMATIVO
            </div>
          </div>
        </div>
      </header>

      {/* Main Content Container */}
      <main className="max-w-6xl mx-auto px-4 -mt-6 relative z-20 grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        {/* LEFT COLUMN: Profile & ICP */}
        <div className="space-y-6">
           {/* PROFILE CARD */}
           <section className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2">
              <User className="w-4 h-4" /> Perfil del Lead
            </h3>
            
            <div className="flex items-center gap-4 mb-6">
              <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center text-xl font-black text-slate-300 border-2 border-slate-200">
                RB
              </div>
              <div>
                <h2 className="text-xl font-bold text-slate-900">Ricardo Burgos</h2>
                <div className="text-sm text-teal-600 font-bold">VP de Personas y Seguridad</div>
                <div className="text-xs text-slate-500 mt-1 font-medium">Grupo Amil</div>
              </div>
            </div>

            <div className="space-y-3 text-sm">
              <div className="flex items-center gap-3 text-slate-600">
                <Building2 className="w-4 h-4 text-slate-400" />
                <span className="font-semibold">Salud / Healthcare Enterprise</span>
              </div>
              <div className="flex items-center gap-3 text-slate-600">
                <MapPin className="w-4 h-4 text-slate-400" />
                <span>Brasil</span>
              </div>
              <div className="flex items-center gap-3 text-slate-600">
                <Briefcase className="w-4 h-4 text-slate-400" />
                <span>C-Level (VP)</span>
              </div>
            </div>
          </section>

          {/* ICP FIT METER */}
          <section className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2">
              <Target className="w-4 h-4" /> Alineaci√≥n con ICP
            </h3>
            <ICPMatch label="Industria (Salud)" score={10} max={10} color="bg-teal-500" />
            <ICPMatch label="Complejidad Operativa" score={10} max={10} color="bg-teal-500" />
            <ICPMatch label="Cargo (VP / C-Level)" score={10} max={10} color="bg-teal-600" />
            <ICPMatch label="Inter√©s (Revisi√≥n)" score={8} max={10} color="bg-amber-500" />
            
            <div className="mt-4 p-3 bg-teal-50 rounded-lg text-xs text-teal-900 border border-teal-100 leading-relaxed">
              <strong>An√°lisis:</strong> Alineaci√≥n total con el ICP Enterprise. Perfil C-Level enfocado en eficiencia. Comportamiento t√≠pico de evaluaci√≥n pasiva (primero leo, luego act√∫o).
            </div>
          </section>
        </div>

        {/* RIGHT COLUMN: Tabs Content */}
        <div className="lg:col-span-2 space-y-6">
          
          {/* Navigation Tabs */}
          <div className="bg-white p-1 rounded-xl shadow-sm border border-slate-200 inline-flex w-full md:w-auto mb-2">
            <button 
              onClick={() => setActiveTab('analysis')}
              className={`flex-1 md:flex-none px-6 py-2 rounded-lg text-sm font-bold transition-colors ${activeTab === 'analysis' ? 'bg-teal-600 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}`}
            >
              Diagn√≥stico
            </button>
            <button 
              onClick={() => setActiveTab('timeline')}
              className={`flex-1 md:flex-none px-6 py-2 rounded-lg text-sm font-bold transition-colors ${activeTab === 'timeline' ? 'bg-teal-600 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}`}
            >
              Timeline
            </button>
            <button 
              onClick={() => setActiveTab('action')}
              className={`flex-1 md:flex-none px-6 py-2 rounded-lg text-sm font-bold transition-colors ${activeTab === 'action' ? 'bg-orange-500 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}`}
            >
              Plan de Recuperaci√≥n
            </button>
          </div>

          {/* TAB: DIAGNOSIS */}
          {activeTab === 'analysis' && (
            <div className="grid md:grid-cols-2 gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500">
              <div className="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-teal-500">
                <h3 className="text-teal-800 font-bold mb-4 flex items-center gap-2">
                  <CheckCircle2 className="w-5 h-5" /> Fortalezas
                </h3>
                <ul className="space-y-3 text-sm text-slate-600">
                  <li className="flex gap-2 items-start">
                    <span className="text-teal-500 font-bold">‚úì</span>
                    Lead responde claro y cordial; el canal sigue abierto.
                  </li>
                  <li className="flex gap-2 items-start">
                    <span className="text-teal-500 font-bold">‚úì</span>
                    Inter√©s expl√≠cito en material (IQL v√°lido).
                  </li>
                  <li className="flex gap-2 items-start">
                    <span className="text-teal-500 font-bold">‚úì</span>
                    Se entreg√≥ el material solicitado tras la fricci√≥n inicial.
                  </li>
                </ul>
              </div>

              <div className="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-orange-500">
                <h3 className="text-orange-800 font-bold mb-4 flex items-center gap-2">
                  <AlertTriangle className="w-5 h-5" /> Puntos de Mejora
                </h3>
                <ul className="space-y-3 text-sm text-slate-600">
                  <li className="flex gap-2 items-start">
                    <span className="text-orange-500 font-bold">!</span>
                    Pedir email gener√≥ fricci√≥n innecesaria (quer√≠a LinkedIn).
                  </li>
                  <li className="flex gap-2 items-start">
                    <span className="text-orange-500 font-bold">!</span>
                    Falt√≥ definir un "siguiente paso" concreto tras el env√≠o.
                  </li>
                  <li className="flex gap-2 items-start">
                    <span className="text-orange-500 font-bold">!</span>
                    No se propuso reuni√≥n breve como cierre.
                  </li>
                </ul>
              </div>

              <div className="md:col-span-2 bg-slate-100 p-6 rounded-xl border border-slate-200">
                 <h3 className="text-slate-800 font-bold mb-2 flex items-center gap-2">
                  <BarChart3 className="w-5 h-5" /> Conclusi√≥n del Analista
                </h3>
                <p className="text-sm text-slate-600 leading-relaxed">
                  El problema no es falta de inter√©s, sino timing. Ricardo act√∫a como un C-Level: centraliza, revisa primero y avanza solo cuando ve valor. Est√° en estado <strong>Activo / Nurturing</strong>. Requiere seguimiento sin presi√≥n.
                </p>
              </div>
            </div>
          )}

          {/* TAB: TIMELINE */}
          {activeTab === 'timeline' && (
            <div className="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 animate-in fade-in slide-in-from-bottom-4 duration-500">
              <h3 className="font-bold text-slate-800 mb-6">Historial de Interacci√≥n</h3>
              <div className="space-y-1">
                <TimelineItem 
                  date="29 Nov - 03 Dic" 
                  title="Conexi√≥n & Valor" 
                  desc="Mensajes iniciales y refuerzo de dolores del sector salud." 
                  type="neutral" 
                />
                <TimelineItem 
                  date="05 Dic" 
                  title="Solicitud de Material (IQL)" 
                  desc="Ricardo pide material para revisar 'cuando pueda'." 
                  type="success" 
                />
                <TimelineItem 
                  date="10 - 12 Dic" 
                  title="Fricci√≥n Log√≠stica" 
                  desc="Se pide email, Ricardo prefiere LinkedIn. (Leve fricci√≥n)." 
                  type="warning" 
                />
                <TimelineItem 
                  date="15 - 16 Dic" 
                  title="Env√≠o Web" 
                  desc="Juliana env√≠a web. Ricardo agradece." 
                  type="neutral" 
                />
                <TimelineItem 
                  date="18 Dic" 
                  title="Env√≠o One Pager" 
                  desc="Se env√≠a documento en portugu√©s. Ricardo agradece con emojis." 
                  type="success" 
                />
              </div>
            </div>
          )}

          {/* TAB: ACTION PLAN (BILING√úE) */}
          {activeTab === 'action' && (
            <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
              <div className="bg-orange-50 p-6 rounded-2xl border border-orange-200 mb-6">
                <h3 className="text-orange-900 font-bold text-lg mb-2 flex items-center gap-2">
                  <Send className="w-5 h-5" /> Estrategia de Nurturing
                </h3>
                <p className="text-orange-800 text-sm">Objetivo: Retomar sin presi√≥n y validar utilidad del material.</p>
              </div>

              {/* OPCI√ìN 1 */}
              <BilingualMessage 
                title="Opci√≥n 1: Follow-up Suave (Recomendada)"
                recommended={true}
                ptText={`Oi Ricardo! üòä

Queria s√≥ confirmar se voc√™ conseguiu dar uma olhada no material que compartilhei.
Preparei como uma vis√£o bem objetiva, justamente para facilitar.

Se fizer sentido, podemos marcar uma conversa r√°pida (10 min) s√≥ para trocar impress√µes.

Fico √† disposi√ß√£o.`}
                esText={`Hola Ricardo üòä

Quer√≠a confirmar si pudiste revisar el material que compart√≠.
La idea fue dejar una visi√≥n bien objetiva y f√°cil de consumir.

Si te parece, podemos agendar una conversaci√≥n r√°pida (10 min) solo para intercambiar impresiones.

Quedo a disposici√≥n.`}
              />

              {/* OPCI√ìN 2 */}
              <BilingualMessage 
                title="Opci√≥n 2: Enfoque Estrat√©gico (Personas)"
                recommended={false}
                ptText={`Ricardo, aproveitando sua atua√ß√£o em Pessoas e Seguran√ßa:

Temos apoiado grandes grupos de sa√∫de a ganhar efici√™ncia no atendimento digital, reduzindo retrabalho e melhorando a experi√™ncia de pacientes e equipes.

Caso veja valor, fico feliz em explicar em 10 minutos como isso funciona na pr√°tica.`}
                esText={`Ricardo, aprovechando tu rol en Personas y Seguridad:

Estamos apoyando a grandes grupos de salud a ganar eficiencia en la atenci√≥n digital, reduciendo retrabajo y mejorando la experiencia de pacientes y equipos.

Si ves valor, con gusto te explico en 10 minutos c√≥mo funciona en la pr√°ctica.`}
              />
            </div>
          )}

        </div>

      </main>

    </div>
  );
}
